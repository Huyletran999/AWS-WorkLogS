<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="thienlh@thienlu.com"><link rel=icon href=../../images/favicon.png type=image/png><title>Blog 1 :: Internship Report</title>
<link href=../../css/nucleus.css?1765365955 rel=stylesheet><link href=../../css/fontawesome-all.min.css?1765365955 rel=stylesheet><link href=../../css/hybrid.css?1765365955 rel=stylesheet><link href=../../css/featherlight.min.css?1765365955 rel=stylesheet><link href=../../css/perfect-scrollbar.min.css?1765365955 rel=stylesheet><link href=../../css/auto-complete.css?1765365955 rel=stylesheet><link href=../../css/atom-one-dark-reasonable.css?1765365955 rel=stylesheet><link href=../../css/theme.css?1765365955 rel=stylesheet><link href=../../css/hugo-theme.css?1765365955 rel=stylesheet><link href=../../css/theme-workshop.css?1765365955 rel=stylesheet><script src=../../js/jquery-3.3.1.min.js?1765365955></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../3-blogstranslated/3.1-blog1/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../js/lunr.min.js?1765365955></script><script type=text/javascript src=../../js/auto-complete.js?1765365955></script><script type=text/javascript>var baseurl="https://huyletran999.github.io/AWS-WorkLogS/"</script><script type=text/javascript src=../../js/search.js?1765365955></script></div><div class=highlightable><ul class=topics><li data-nav-id=/1-worklog/ title=Worklog class=dd-item><a href=../../1-worklog/><b>1. </b>Worklog
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/1-worklog/1.1-week1/ title="Week 1 Worklog" class=dd-item><a href=../../1-worklog/1.1-week1/><b>1.1. </b>Week 1 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.2-week2/ title="Week 2 Worklog" class=dd-item><a href=../../1-worklog/1.2-week2/><b>1.2. </b>Week 2 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.3-week3/ title="Week 3 Worklog" class=dd-item><a href=../../1-worklog/1.3-week3/><b>1.3. </b>Week 3 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.4-week4/ title="Week 4 Worklog" class=dd-item><a href=../../1-worklog/1.4-week4/><b>1.4. </b>Week 4 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.5-week5/ title="Week 5 Worklog" class=dd-item><a href=../../1-worklog/1.5-week5/><b>1.5. </b>Week 5 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.6-week6/ title="Week 6 Worklog" class=dd-item><a href=../../1-worklog/1.6-week6/><b>1.6. </b>Week 6 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.7-week7/ title="Week 7 Worklog" class=dd-item><a href=../../1-worklog/1.7-week7/><b>1.7. </b>Week 7 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.8-week8/ title="Week 8 Worklog" class=dd-item><a href=../../1-worklog/1.8-week8/><b>1.8. </b>Week 8 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.9-week9/ title="Week 9 Worklog" class=dd-item><a href=../../1-worklog/1.9-week9/><b>1.9. </b>Week 9 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.10-week10/ title="Week 10 Worklog" class=dd-item><a href=../../1-worklog/1.10-week10/><b>1.10. </b>Week 10 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.11-week11/ title="Week 11 Worklog" class=dd-item><a href=../../1-worklog/1.11-week11/><b>1.11. </b>Week 11 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.12-week12/ title="Week 12 Worklog" class=dd-item><a href=../../1-worklog/1.12-week12/><b>1.12. </b>Week 12 Worklog
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/2-proposal/ title=Proposal class=dd-item><a href=../../2-proposal/><b>2. </b>Proposal
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/ title="Translated Blogs" class="dd-item
parent"><a href=../../3-blogstranslated/><b>3. </b>Translated Blogs
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/3-blogstranslated/3.1-blog1/ title="Blog 1" class="dd-item
active"><a href=../../3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.2-blog2/ title="Blog 2" class=dd-item><a href=../../3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.3-blog3/ title="Blog 3" class=dd-item><a href=../../3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/4-eventparticipated/ title="Events Participated" class=dd-item><a href=../../4-eventparticipated/><b>4. </b>Events Participated
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/4-eventparticipated/4.1-event1/ title="Event 1" class=dd-item><a href=../../4-eventparticipated/4.1-event1/><b>4.1. </b>Event 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.2-event2/ title="Event 2" class=dd-item><a href=../../4-eventparticipated/4.2-event2/><b>4.2. </b>Event 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.3-event3/ title="Event 3" class=dd-item><a href=../../4-eventparticipated/4.3-event3/><b>4.3. </b>Event 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.4-event4/ title="Event 4" class=dd-item><a href=../../4-eventparticipated/4.4-event4/><b>4.4. </b>Event 4
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/ title=Workshop class=dd-item><a href=../../5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.1-workshop-overview/ title=Overview class=dd-item><a href=../../5-workshop/5.1-workshop-overview/><b>5.1. </b>Overview
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.2-prerequiste/ title=Prerequisites class=dd-item><a href=../../5-workshop/5.2-prerequiste/><b>5.2. </b>Prerequisites
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-foundation-setup/ title="Foundation Setup" class=dd-item><a href=../../5-workshop/5.3-foundation-setup/><b>5.3. </b>Foundation Setup
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.3-foundation-setup/5.3.1-set-up-s3-buckets/ title="Set up S3 buckets" class=dd-item><a href=../../5-workshop/5.3-foundation-setup/5.3.1-set-up-s3-buckets/><b>5.3.1. </b>Set up S3 buckets
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-foundation-setup/5.3.2-set-up-s3-buckets-policies/ title="Set up S3 buckets policies" class=dd-item><a href=../../5-workshop/5.3-foundation-setup/5.3.2-set-up-s3-buckets-policies/><b>5.3.2. </b>Set up S3 buckets policies
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/ title="Create IAM Roles and Policies" class=dd-item><a href=../../5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/><b>5.3.3. </b>Create IAM Roles and Policies
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/5.3.3.1-create-lambda-excecution-roles/ title="Create Lambda Execution Roles" class=dd-item><a href=../../5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/5.3.3.1-create-lambda-excecution-roles/><b>5.3.3.1. </b>Create Lambda Execution Roles
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/5.3.3.2-create-service-roles/ title="Create Service Roles" class=dd-item><a href=../../5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/5.3.3.2-create-service-roles/><b>5.3.3.2. </b>Create Service Roles
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/5.3.3.3-create-iam-policy/ title="Create IAM Policy" class=dd-item><a href=../../5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/5.3.3.3-create-iam-policy/><b>5.3.3.3. </b>Create IAM Policy
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/5-workshop/5.4-monitoring-setup/ title="Monitoring Setup" class=dd-item><a href=../../5-workshop/5.4-monitoring-setup/><b>5.4. </b>Monitoring Setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.5-processing-setup/ title="Processing Setup" class=dd-item><a href=../../5-workshop/5.5-processing-setup/><b>5.5. </b>Processing Setup
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.5-processing-setup/5.5.1-create-kinesis-data-firehose/ title="Create Kinesis Data Firehose" class=dd-item><a href=../../5-workshop/5.5-processing-setup/5.5.1-create-kinesis-data-firehose/><b>5.5.1. </b>Create Kinesis Data Firehose
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.5-processing-setup/5.5.2-create-aws-glue-database-and-tables/ title="Create AWS Glue Database and Tables" class=dd-item><a href=../../5-workshop/5.5-processing-setup/5.5.2-create-aws-glue-database-and-tables/><b>5.5.2. </b>Create AWS Glue Database and Tables
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.5-processing-setup/5.5.3-create-lambda-function-etl-processing/ title="Create Lambda Function - ETL Processing" class=dd-item><a href=../../5-workshop/5.5-processing-setup/5.5.3-create-lambda-function-etl-processing/><b>5.5.3. </b>Create Lambda Function - ETL Processing
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.6-automation-setup/ title="Automation Setup" class=dd-item><a href=../../5-workshop/5.6-automation-setup/><b>5.6. </b>Automation Setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.7-dashboard-setup/ title="Dashboard Setup" class=dd-item><a href=../../5-workshop/5.7-dashboard-setup/><b>5.7. </b>Dashboard Setup
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.7-dashboard-setup/5.7.1-setup-s3/ title="Setup S3 Bucket for Dashboard" class=dd-item><a href=../../5-workshop/5.7-dashboard-setup/5.7.1-setup-s3/><b>5.7.1. </b>Setup S3 Bucket for Dashboard
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.7-dashboard-setup/5.7.2-setup-lambda/ title="Create IAM Roles and Policies" class=dd-item><a href=../../5-workshop/5.7-dashboard-setup/5.7.2-setup-lambda/><b>5.7.2. </b>Create IAM Roles and Policies
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.7-dashboard-setup/5.7.2-setup-lambda/5.7.2.1-create-iam-role-and-policy-for-lambda/ title="Lambda IAM Role and Policy setup" class=dd-item><a href=../../5-workshop/5.7-dashboard-setup/5.7.2-setup-lambda/5.7.2.1-create-iam-role-and-policy-for-lambda/><b>5.7.2.1. </b>Lambda IAM Role and Policy setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.7-dashboard-setup/5.7.2-setup-lambda/5.7.2.2-create-lambda-function/ title="Lambda setup" class=dd-item><a href=../../5-workshop/5.7-dashboard-setup/5.7.2-setup-lambda/5.7.2.2-create-lambda-function/><b>5.7.2.2. </b>Lambda setup
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.7-dashboard-setup/5.7.3-setup-api-gateway/ title="API Gateway Setup" class=dd-item><a href=../../5-workshop/5.7-dashboard-setup/5.7.3-setup-api-gateway/><b>5.7.3. </b>API Gateway Setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.7-dashboard-setup/5.7.4-setup-cloudfront/ title="Cloudfront Setup" class=dd-item><a href=../../5-workshop/5.7-dashboard-setup/5.7.4-setup-cloudfront/><b>5.7.4. </b>Cloudfront Setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.7-dashboard-setup/5.7.5-setup-cognito/ title="Cognito Setup" class=dd-item><a href=../../5-workshop/5.7-dashboard-setup/5.7.5-setup-cognito/><b>5.7.5. </b>Cognito Setup
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.8-verify-setup/ title="Verify Setup" class=dd-item><a href=../../5-workshop/5.8-verify-setup/><b>5.8. </b>Verify Setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.9-use-cdk/ title="Use CDK" class=dd-item><a href=../../5-workshop/5.9-use-cdk/><b>5.9. </b>Use CDK
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.10-cleanup/ title=Cleanup class=dd-item><a href=../../5-workshop/5.10-cleanup/><b>5.10. </b>Cleanup
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.10-cleanup/5.10.2-cdk-cleanup/ title="CDK Cleanup" class=dd-item><a href=../../5-workshop/5.10-cleanup/5.10.2-cdk-cleanup/><b>5.10.2. </b>CDK Cleanup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.10-cleanup/5.10.1-manual-cleanup/ title="Manual Cleanup" class=dd-item><a href=../../5-workshop/5.10-cleanup/5.10.1-manual-cleanup/><b>5.10.1 </b>Manual Cleanup
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.11-appendices/ title=Appendices class=dd-item><a href=../../5-workshop/5.11-appendices/><b>5.11. </b>Appendices
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.11-appendices/5.11.1-cloudtrail-etl/ title="CloudTrail ETL Code" class=dd-item><a href=../../5-workshop/5.11-appendices/5.11.1-cloudtrail-etl/><b>5.11.1. </b>CloudTrail ETL Code
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.11-appendices/5.11.2-guardduty-etl/ title="GuardDuty ETL Code" class=dd-item><a href=../../5-workshop/5.11-appendices/5.11.2-guardduty-etl/><b>5.11.2. </b>GuardDuty ETL Code
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.11-appendices/5.11.3-cloudwatch-etl/ title="CloudWatch ETL Code" class=dd-item><a href=../../5-workshop/5.11-appendices/5.11.3-cloudwatch-etl/><b>5.11.3. </b>CloudWatch ETL Code
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.11-appendices/5.11.4-cloudwatch-eni-etl/ title="CloudWatch ENI ETL Code" class=dd-item><a href=../../5-workshop/5.11-appendices/5.11.4-cloudwatch-eni-etl/><b>5.11.4. </b>CloudWatch ENI ETL Code
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.11-appendices/5.11.5-cloudwatch-autoexport/ title="CloudWatch Autoexport Code" class=dd-item><a href=../../5-workshop/5.11-appendices/5.11.5-cloudwatch-autoexport/><b>5.11.5. </b>CloudWatch Autoexport Code
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.11-appendices/5.11.6-parse-findings/ title="Parse Findings Code" class=dd-item><a href=../../5-workshop/5.11-appendices/5.11.6-parse-findings/><b>5.11.6. </b>Parse Findings Code
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.11-appendices/5.11.7-isolate-ec2/ title="Isolate EC2 Code" class=dd-item><a href=../../5-workshop/5.11-appendices/5.11.7-isolate-ec2/><b>5.11.7. </b>Isolate EC2 Code
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.11-appendices/5.11.8-quarantine-iam/ title="Quarantine IAM Code" class=dd-item><a href=../../5-workshop/5.11-appendices/5.11.8-quarantine-iam/><b>5.11.8. </b>Quarantine IAM Code
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.11-appendices/5.11.9-alert-dispatch/ title="Alert Dispatch Code" class=dd-item><a href=../../5-workshop/5.11-appendices/5.11.9-alert-dispatch/><b>5.11.9. </b>Alert Dispatch Code
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.11-appendices/5.11.10-step-functions-state-machine-definition/ title="Steps Functions Definition ASL Code" class=dd-item><a href=../../5-workshop/5.11-appendices/5.11.10-step-functions-state-machine-definition/><b>5.11.10. </b>Steps Functions Definition ASL Code
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/6-self-evaluation/ title=Self-Evaluations class=dd-item><a href=../../6-self-evaluation/><b>6. </b>Self-Evaluations
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/7-feedback/ title="Sharing and Feedback" class=dd-item><a href=../../7-feedback/><b>7. </b>Sharing and Feedback
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://huyletran999.github.io/AWS-WorkLogS/3-blogstranslated/3.1-blog1/ selected>English</option><option id=vi value=https://huyletran999.github.io/AWS-WorkLogS/vi/3-blogstranslated/3.1-blog1/>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../>Internship Report</a> > <a href=../../3-blogstranslated/>Translated Blogs</a> > Blog 1</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#thiết-kế-lại-mô-hình-thực-thể>Thiết kế lại mô hình thực thể</a></li><li><a href=#thiết-kế-lớp-trừu-tượng-api-dynamodb>Thiết kế lớp trừu tượng API DynamoDB</a><ul><li><a href=#xử-lý-lỗi-và-cơ-chế-thử-lại>Xử lý lỗi và cơ chế thử lại</a></li><li><a href=#quản-lý-thao-tác-hàng-loạt-batch-operation-management>Quản lý thao tác hàng loạt (Batch operation management)</a></li><li><a href=#tải-dữ-liệu-liên-quan-của-thực-thể-loading-related-entity-data>Tải dữ liệu liên quan của thực thể (Loading related entity data)</a></li><li><a href=#ánh-xạ-phản-hồi-response-mapping>Ánh xạ phản hồi (Response mapping)</a></li><li><a href=#xây-dựng-biểu-thức-filter-filter-expression-building>Xây dựng biểu thức filter (Filter expression building)</a></li><li><a href=#triển-khai-phân-trang-pagination-implementation>Triển khai phân trang (Pagination implementation)</a></li><li><a href=#mã-hóa-dữ-liệu-data-encryption>Mã hóa dữ liệu (Data encryption)</a></li><li><a href=#observability-quan-sátgiám-sát>Observability (Quan sát/Giám sát)</a></li><li><a href=#quản-lý-giao-dịch-transaction-management>Quản lý giao dịch (Transaction management)</a></li></ul></li><li><a href=#xử-lý-bộ-lọc-handling-filters>Xử lý bộ lọc (Handling filters)</a><ul><li><a href=#xử-lý-các-yêu-cầu-lọc-phức-tạp-handling-complex-filter-requirements>Xử lý các yêu cầu lọc phức tạp (Handling complex filter requirements)</a></li></ul></li><li><a href=#khi-phân-tích-các-truy-vấn-hiện-có-hãy-xác-định-các-kịch-bản-yêu-cầu-lọc-phía-client-và-đánh-giá-tác-động-hiệu-năng-của-chúng>Khi phân tích các truy vấn hiện có, hãy xác định các kịch bản yêu cầu lọc phía client và đánh giá tác động hiệu năng của chúng.</a></li><li><a href=#xử-lý-phân-trang-handling-pagination>Xử lý phân trang (Handling pagination)</a></li><li><a href=#xử-lý-các-trường-hợp-biên-handling-edge-cases>Xử lý các trường hợp biên (Handling edge cases)</a></li><li><a href=#xử-lý-các-phép-tổng-hợp-và-dữ-liệu-phi-chuẩn-hóa-handling-aggregations-and-de-normalized-data>Xử lý các phép tổng hợp và dữ liệu phi chuẩn hóa (Handling aggregations and de-normalized data)</a><ul><li><a href=#quản-lý-các-phép-tổng-hợp-managing-aggregations>Quản lý các phép tổng hợp (Managing aggregations)</a></li><li><a href=#xử-lý-dữ-liệu-phi-chuẩn-hóa-handling-de-normalized-data>Xử lý dữ liệu phi chuẩn hóa (Handling de-normalized data)</a></li><li><a href=#quản-lý-cập-nhật-managing-updates>Quản lý cập nhật (Managing updates)</a></li><li><a href=#xử-lý-phân-tích-analytical-processing>Xử lý phân tích (Analytical processing)</a></li></ul></li><li><a href=#kết-luận>Kết luận</a><ul><li><a href=#về-các-tác-giả>Về các tác giả</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 1</h1><h1 id=sql-to-nosql-hiện-đại-hóa-lớp-truy-cập-dữ-liệu-với-amazon-dynamodb>SQL to NoSQL: Hiện đại hóa lớp truy cập dữ liệu với Amazon DynamoDB</h1><p><strong>AWS Database Blog</strong>
<strong>Bởi Ramana Mannava, Mahesh Kumar Vemula, và Akber Rizwan Shaik</strong>
<em>03 JUL 2025</em>
<em>Chuyên mục: Advanced (300), Amazon DynamoDB, Migration, Technical How-to</em></p><hr><p>Trong Phần 1 của loạt bài, chúng tôi đã khám phá cách di chuyển hiệu quả từ SQL sang Amazon DynamoDB. Sau khi thiết lập các chiến lược mô hình hóa dữ liệu được thảo luận trong Phần 2, giờ đây chúng tôi xem xét những cân nhắc chính để phân tích và thiết kế bộ lọc, phân trang, các trường hợp biên (edge cases) và các phép tổng hợp, xây dựng trên các mô hình dữ liệu đã thiết kế nhằm tạo ra một lớp truy cập dữ liệu hiệu quả.</p><p>Thành phần này kết nối ứng dụng của bạn với các tính năng và khả năng của DynamoDB. Việc chuyển đổi từ các mẫu truy cập dựa trên SQL sang cách tiếp cận điều khiển bằng API của DynamoDB mở ra cơ hội tối ưu hóa cách ứng dụng tương tác với lớp dữ liệu của nó.</p><p>Phần cuối cùng của loạt bài này tập trung vào việc triển khai một lớp trừu tượng hiệu quả và xử lý các mẫu truy cập dữ liệu khác nhau trong DynamoDB.</p><h2 id=thiết-kế-lại-mô-hình-thực-thể>Thiết kế lại mô hình thực thể</h2><p>Mô hình thực thể, đại diện cho cấu trúc dữ liệu trong ứng dụng của bạn, sẽ cần được thiết kế lại để phù hợp với mô hình dữ liệu của DynamoDB. Điều này có thể bao gồm việc phi chuẩn hóa (de-normalizing) các mô hình và tái cấu trúc các mối quan hệ giữa các thực thể.</p><p>Bên cạnh đó, hãy cân nhắc công sức liên quan tới các cấu hình sau:</p><ul><li><strong>Chú thích thuộc tính DynamoDB:</strong> Gắn chú thích cho các thuộc tính thực thể với các thuộc tính đặc thù của DynamoDB, bao gồm partition key, sort key, thông tin local secondary index (LSI) và thông tin global secondary index (GSI). Ví dụ, khi sử dụng mô hình persistence đối tượng .NET, bạn cần ánh xạ các lớp và thuộc tính với các bảng và thuộc tính DynamoDB.</li><li><strong>Cấu hình tiền tố khóa:</strong> Trong thiết kế một bảng đơn (single table design), bạn có thể phải cấu hình tiền tố cho partition key và sort key trong các mô hình thực thể. Phân tích cách những tiền tố này sẽ được sử dụng để truy vấn trong lớp truy cập dữ liệu của bạn.</li></ul><p>Đoạn code sau là ví dụ minh họa cho việc cấu hình tiền tố khóa trong các mô hình thực thể:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Post</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>string</span> PREFIX = <span style=color:#e6db74>&#34;POST#&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> Id { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> Content { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> AuthorId { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Post(<span style=color:#66d9ef>string</span> id, <span style=color:#66d9ef>string</span> content, <span style=color:#66d9ef>string</span> authorId)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        Id = id;
</span></span><span style=display:flex><span>        Content = content;
</span></span><span style=display:flex><span>        AuthorId = authorId;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Property that automatically adds prefix</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> PartitionKey =&gt; <span style=color:#e6db74>$&#34;{PREFIX}{Id}&#34;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Usage example</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> post = <span style=color:#66d9ef>new</span> Post(<span style=color:#e6db74>&#34;123&#34;</span>, <span style=color:#e6db74>&#34;Hello World&#34;</span>, <span style=color:#e6db74>&#34;USER#456&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> queryKey = post.PartitionKey; <span style=color:#75715e>// Gets &#34;POST#123&#34;</span>
</span></span></code></pre></div><p><strong>Thiết kế lại quy tắc ánh xạ:</strong> Do thay đổi trong mô hình thực thể, các quy tắc ánh xạ hiện có giữa view models của ứng dụng và các mô hình thực thể có thể cần được thiết kế lại.</p><h2 id=thiết-kế-lớp-trừu-tượng-api-dynamodb>Thiết kế lớp trừu tượng API DynamoDB</h2><p>Lớp trừu tượng API DynamoDB đóng gói các thao tác DynamoDB bên dưới đồng thời cung cấp cho ứng dụng của bạn một giao diện sạch sẽ. Hãy cùng khám phá các thành phần bạn có thể cần triển khai trong lớp này.</p><h3 id=xử-lý-lỗi-và-cơ-chế-thử-lại>Xử lý lỗi và cơ chế thử lại</h3><p>Các kịch bản lưu lượng cao thường dẫn tới các lỗi tạm thời cần xử lý. Ví dụ, khi nội dung lan truyền mạnh hoặc một bài đăng của người nổi tiếng thu hút sự chú ý đột ngột, bạn có thể gặp ngoại lệ vượt quá throughput. Bạn có thể cần triển khai:</p><ul><li>Cơ chế thử lại tự động với exponential backoff cho các lỗi tạm thời.</li><li>Chuyển dịch ngoại lệ DynamoDB thành các lỗi có ý nghĩa cho ứng dụng.</li><li>Ghi nhật ký lỗi nhất quán để phục vụ khắc phục sự cố.</li><li>Xử lý thất bại kiểm tra điều kiện (conditional check failures) trong các cập nhật đồng thời.</li></ul><h3 id=quản-lý-thao-tác-hàng-loạt-batch-operation-management>Quản lý thao tác hàng loạt (Batch operation management)</h3><p>Ứng dụng thường cần xử lý nhiều mục một cách hiệu quả để cung cấp trải nghiệm người dùng tốt. Xem xét các kịch bản như tải một news feed cá nhân hóa kết hợp bài đăng từ nhiều người theo dõi. Bạn có thể cần triển khai:</p><ul><li>Tự động chia nhỏ các yêu cầu trong giới hạn của DynamoDB.</li><li>Xử lý song song để tối ưu hiệu năng.</li><li>Cơ chế khôi phục cho các thất bại một phần trong batch.</li><li>Theo dõi tiến độ cho các thao tác chạy dài.</li></ul><h3 id=tải-dữ-liệu-liên-quan-của-thực-thể-loading-related-entity-data>Tải dữ liệu liên quan của thực thể (Loading related entity data)</h3><p>Khi di chuyển từ cơ sở dữ liệu quan hệ sang DynamoDB, có một nhận thức phổ biến rằng dữ liệu quan hệ thường được phi chuẩn hóa và việc truy cập dữ liệu liên quan trở nên đơn giản. Tuy nhiên, điều này không phải lúc nào cũng đúng. Mặc dù trong một số trường hợp các quan hệ có thể được mô hình hóa bằng chiến lược single-item modeling, tùy theo chi phí và cân nhắc hiệu năng, các quan hệ có thể được mô hình hóa bằng các chiến lược khác như vertical partitioning hoặc composite sort keys.</p><p>Khi thích nghi với DynamoDB, bạn có thể phải phát triển các phương thức trợ giúp trong lớp trừu tượng của mình để tải dữ liệu quan hệ của một thực thể (navigation properties) một cách hiệu quả. Các phương thức này cần xem xét kiến trúc ứng dụng, mẫu truy cập và chiến lược mô hình hóa dữ liệu.</p><p>Ví dụ, trong ứng dụng mạng xã hội của chúng tôi, việc tải các comment cho một bài đăng có thể yêu cầu các phương pháp khác nhau tùy thuộc vào chiến lược mô hình hóa được chọn – từ việc lấy thuộc tính đơn giản trong single-item models đến các thao tác truy vấn trong vertical partitioning.</p><ul><li>Đối với các thực thể liên quan sử dụng chiến lược single-item, có thể không cần logic tải cụ thể vì tất cả dữ liệu được truy xuất trong một thao tác API duy nhất.</li><li>Tuy nhiên, đối với các chiến lược mô hình khác như vertical partitioning, các phương thức trong lớp trừu tượng của bạn cần xử lý truy vấn hiệu quả dựa trên điều kiện lọc và phân trang. Ví dụ, khi comments được lưu như các item riêng biệt chia sẻ partition key của bài đăng, phương thức phải truy vấn và phân trang các item liên quan một cách hiệu quả.</li><li>Xây dựng dựa trên khả năng vận hành batch, bạn có thể mở rộng các phương thức này để xử lý tải dữ liệu liên quan cho nhiều mục. Ví dụ, khi tải comments cho nhiều bài đăng, sử dụng BatchGetItem để thực hiện các việc sau:<ul><li>Sử dụng cơ chế batching đã thiết lập để nhóm các yêu cầu.</li><li>Áp dụng retry và chiến lược xử lý lỗi.</li><li>Cung cấp giao diện nhất quán cho cả thao tác đơn lẻ và thao tác hàng loạt.</li></ul></li></ul><p>Khi sử dụng GSI, bạn có thể cần truy xuất các thuộc tính bổ sung không được bao gồm trong projection của GSI. Thiết kế các chiến lược để tải hiệu quả dữ liệu cần thiết trong khi tối thiểu hóa các cuộc gọi API và tối ưu hóa hiệu năng và chi phí. Phương thức trong lớp trừu tượng của bạn có thể cần cung cấp:</p><ul><li>Giao diện nhất quán để tải dữ liệu liên quan.</li><li>Tối ưu hóa các cuộc gọi API và chi phí.</li><li>Đơn giản hóa bảo trì thông qua triển khai tập trung.</li></ul><p>Đoạn code sau là ví dụ minh họa cho việc tải các navigation properties:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// Entity with navigation property</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Post</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> Id { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> Content { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> IEnumerable&lt;Comment&gt; Comments { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Interface for loading related data</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>INavigationPropertyManager</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    Task&lt;IEnumerable&lt;T&gt;&gt; LoadRelatedItemsAsync&lt;T&gt;(<span style=color:#66d9ef>string</span> parentId);
</span></span><span style=display:flex><span>    Task&lt;IDictionary&lt;<span style=color:#66d9ef>string</span>, IEnumerable&lt;T&gt;&gt;&gt; LoadRelatedItemsInBatchAsync&lt;T&gt;(IEnumerable&lt;<span style=color:#66d9ef>string</span>&gt; parentIds);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Service using the loader</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PostService</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> INavigationPropertyManager _navigationPropertyManager;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> PostService(INavigationPropertyManager navigationPropertyManager)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _navigationPropertyManager = navigationPropertyManager;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>async</span> Task&lt;IEnumerable&lt;Comment&gt;&gt; GetPostCommentsAsync(<span style=color:#66d9ef>string</span> postId)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>await</span> _navigationPropertyManager.LoadRelatedItemsAsync&lt;Comment&gt;(postId);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Khi thiết kế các phương thức này, hãy phân tích các mẫu tải hiện tại của ứng dụng và đánh giá liệu việc duy trì các mẫu tương tự trong DynamoDB có thể mang lại lợi ích cho hiệu năng và trải nghiệm người dùng hay không.</p><h3 id=ánh-xạ-phản-hồi-response-mapping>Ánh xạ phản hồi (Response mapping)</h3><p>Khi ứng dụng phát triển, cấu trúc dữ liệu và yêu cầu thay đổi theo thời gian. Ví dụ, khi thêm các tính năng mới như phản ứng (reactions) cho bài đăng ngoài lượt thích đơn giản, hoặc giới thiệu nội dung đa phương tiện phong phú trong hồ sơ người dùng, khả năng tương thích ngược (backward compatibility) trở nên quan trọng. Bạn có thể cần triển khai logic ánh xạ để thực hiện các chức năng sau:</p><ul><li>Chuyển các item DynamoDB thành các domain object.</li><li>Xử lý tương thích ngược khi mô hình dữ liệu tiến hóa.</li><li>Quản lý giá trị mặc định cho các thuộc tính thiếu.</li><li>Hỗ trợ các phiên bản khác nhau của cùng một thực thể.</li></ul><h3 id=xây-dựng-biểu-thức-filter-filter-expression-building>Xây dựng biểu thức filter (Filter expression building)</h3><p>Các nhu cầu truy xuất dữ liệu phức tạp thường xuất hiện trong các ứng dụng hiện đại. Ví dụ, khi người dùng muốn tìm bài đăng trong khung thời gian cụ thể có mức tương tác cao, hoặc khi lọc comment dựa trên các mẫu tương tác người dùng. Lớp trừu tượng của bạn có thể cần:</p><ul><li>Chuyển đổi tiêu chí tìm kiếm phức tạp thành các biểu thức filter DynamoDB.</li><li>Xử lý nhiều điều kiện filter một cách động.</li><li>Quản lý expression attribute names và values.</li><li>Hỗ trợ lọc thuộc tính lồng nhau.</li></ul><h3 id=triển-khai-phân-trang-pagination-implementation>Triển khai phân trang (Pagination implementation)</h3><p>Việc điều hướng dữ liệu hiệu quả quan trọng đối với trải nghiệm người dùng. Xem xét các kịch bản như người dùng cuộn qua news feed vô hạn, hoặc người kiểm duyệt duyệt các comment trên các bài viral. Bạn có thể cần triển khai:</p><ul><li>Phân trang dựa trên token sử dụng <code>LastEvaluatedKey</code>.</li><li>Cấu hình kích thước trang (page size) có thể tùy chỉnh.</li><li>Xử lý hiệu quả các tập kết quả lớn.</li><li>Hành vi phân trang nhất quán trên các truy vấn khác nhau.</li></ul><p>Đoạn code sau là ví dụ minh họa cho việc phân trang:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// Enhanced interface adding pagination support</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>INavigationPropertyManager</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    Task&lt;IEnumerable&lt;T&gt;&gt; LoadRelatedItemsAsync&lt;T&gt;(<span style=color:#66d9ef>string</span> parentId);
</span></span><span style=display:flex><span>    Task&lt;IDictionary&lt;<span style=color:#66d9ef>string</span>, IEnumerable&lt;T&gt;&gt;&gt; LoadRelatedItemsInBatchAsync&lt;T&gt;(IEnumerable&lt;<span style=color:#66d9ef>string</span>&gt; parentIds);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// method for paginated loading</span>
</span></span><span style=display:flex><span>    Task&lt;PagedResult&lt;T&gt;&gt; LoadRelatedItemsPagedAsync&lt;T&gt;(<span style=color:#66d9ef>string</span> parentId, PaginationOptions options);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PaginationOptions</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> PageSize { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; } = <span style=color:#ae81ff>20</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> ExclusiveStartKey { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PagedResult</span>&lt;T&gt;
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> IEnumerable&lt;T&gt; Items { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> LastEvaluatedKey { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// With pagination support</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PostService</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> INavigationPropertyManager _navigationPropertyManager;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> PostService(INavigationPropertyManager navigationPropertyManager)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _navigationPropertyManager = navigationPropertyManager;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>async</span> Task&lt;PagedResult&lt;Comment&gt;&gt; GetPostCommentsPagedAsync(<span style=color:#66d9ef>string</span> postId, <span style=color:#66d9ef>int</span> pageSize = <span style=color:#ae81ff>20</span>, <span style=color:#66d9ef>string</span> nextToken = <span style=color:#66d9ef>null</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> options = <span style=color:#66d9ef>new</span> PaginationOptions
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            PageSize = pageSize,
</span></span><span style=display:flex><span>            ExclusiveStartKey = nextToken
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>await</span> _navigationPropertyManager.LoadRelatedItemsPagedAsync&lt;Comment&gt;(postId, options);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=mã-hóa-dữ-liệu-data-encryption>Mã hóa dữ liệu (Data encryption)</h3><p>Bảo vệ dữ liệu nhạy cảm của người dùng là điều tối quan trọng trong các ứng dụng hiện đại. Bạn có thể cần triển khai:</p><ul><li>Mã hóa phía client sử dụng AWS Database Encryption SDK bên cạnh mã hóa phía server do DynamoDB cung cấp.</li><li>Mã hóa chọn lọc các thuộc tính.</li><li>Xử lý lỗi cho các thao tác mã hóa.</li></ul><h3 id=observability-quan-sátgiám-sát>Observability (Quan sát/Giám sát)</h3><p>Giám sát sức khỏe ứng dụng và hiệu năng là điều cần thiết. Hãy xem xét giám sát các chỉ số Amazon CloudWatch sau:</p><ul><li><strong>Theo dõi độ trễ request:</strong> Giám sát các chỉ số DynamoDB như <code>SuccessfulRequestLatency</code>, và tạo các metric tùy chỉnh cho <code>TransactionConflict</code> và <code>ConditionalCheckFailedRequests</code>.</li><li><strong>Tiêu thụ capacity:</strong> Theo dõi <code>ConsumedReadCapacityUnits</code> và <code>ConsumedWriteCapacityUnits</code>.</li><li><strong>Tỷ lệ lỗi và các mẫu lỗi:</strong> Giám sát <code>ConditionalCheckFailedRequests</code>, <code>SystemErrors</code>, <code>UserErrors</code>.</li><li><strong>Hiệu năng truy vấn:</strong> Theo dõi <code>ThrottledRequests</code>, <code>ScannedCount</code> hoặc <code>Count</code>, thời gian lọc phía client, và độ trễ cuộc gọi dịch vụ bên ngoài.</li></ul><h3 id=quản-lý-giao-dịch-transaction-management>Quản lý giao dịch (Transaction management)</h3><p>Duy trì tính nhất quán dữ liệu là điều quan trọng trong nhiều kịch bản. Bạn có thể cần:</p><ul><li>Xử lý các thao tác giao dịch.</li><li>Quản lý timeout và xung đột.</li><li>Logic bù trừ (compensation) cho các giao dịch thất bại.</li></ul><hr><h2 id=xử-lý-bộ-lọc-handling-filters>Xử lý bộ lọc (Handling filters)</h2><p>Sau khi bạn thiết kế lớp trừu tượng API DynamoDB với các thao tác cơ bản và khả năng tải dữ liệu, hãy phân tích cách thích nghi các mẫu truy vấn hiện có để phù hợp với cách truy vấn của DynamoDB.</p><p>Trong khi các cơ sở dữ liệu quan hệ sử dụng trình tối ưu hóa truy vấn cho các điều kiện WHERE, DynamoDB trao quyền cho nhà phát triển kiểm soát chính xác luồng thực thi truy vấn. DynamoDB xử lý truy vấn theo hai bước:</p><ol><li>Đầu tiên, nó truy xuất các item khớp với key condition expression dựa trên partition và sort keys.</li><li>Sau đó, trước khi trả kết quả, nó áp dụng filter expressions lên các thuộc tính không phải khóa.</li></ol><p>Mặc dù filter expressions không giảm tiêu thụ RCU vì toàn bộ tập kết quả vẫn được đọc trước khi lọc, chúng giảm chi phí truyền tải dữ liệu và cải thiện hiệu năng ứng dụng bằng cách lọc dữ liệu ở cấp độ dịch vụ DynamoDB.</p><h3 id=xử-lý-các-yêu-cầu-lọc-phức-tạp-handling-complex-filter-requirements>Xử lý các yêu cầu lọc phức tạp (Handling complex filter requirements)</h3><p>Khả năng biểu thức linh hoạt của DynamoDB xử lý nhiều kịch bản lọc trực tiếp, và bạn có thể triển khai lọc phía client cho bất kỳ yêu cầu bổ sung nào. Một vài ví dụ bao gồm:</p><ul><li><strong>Các hàm hoặc phương thức không được hỗ trợ:</strong> Khi làm việc với các bộ lọc tham chiếu đến các hàm hệ thống (như <code>SUBSTRING</code>, <code>CONCAT</code>, <code>DATEADD</code>, <code>DATEDIFF</code>), hãy truy xuất dữ liệu từ DynamoDB và áp dụng các bộ lọc chuyên biệt này ở lớp ứng dụng.</li><li><strong>Tải dữ liệu thực thể liên quan:</strong> Đối với các truy vấn lọc dựa trên thuộc tính của các thực thể liên quan, ứng dụng có thể cần tải dữ liệu từ nhiều bảng DynamoDB hoặc các bộ sưu tập item và áp dụng lọc tại lớp ứng dụng.</li><li><strong>Tích hợp với nguồn dữ liệu bên ngoài:</strong> Trong kiến trúc microservice, lọc có thể yêu cầu dữ liệu từ các dịch vụ hoặc cơ sở dữ liệu khác.</li></ul><p>Hãy xem xét trường hợp sử dụng truy xuất comment bài đăng theo tác giả đang hoạt động (active) và điểm sentiment, yêu cầu dữ liệu từ dịch vụ người dùng ngoài và cơ sở dữ liệu phân tích:</p><p><strong>Original SQL Query demonstrating filters across different data sources:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>c</span>.<span style=color:#f92672>*</span>, u.name, u.profile_pic, u.status, m.sentiment_score
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> comments <span style=color:#66d9ef>c</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>JOIN</span> users u <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>c</span>.user_id <span style=color:#f92672>=</span> u.id
</span></span><span style=display:flex><span><span style=color:#66d9ef>JOIN</span> comment_analytics m <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>c</span>.id <span style=color:#f92672>=</span> m.comment_id
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> <span style=color:#66d9ef>c</span>.post_id <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;123&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>AND</span> <span style=color:#66d9ef>c</span>.created_at <span style=color:#f92672>&gt;</span> DATEADD(<span style=color:#66d9ef>year</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, GETUTCDATE())
</span></span><span style=display:flex><span><span style=color:#66d9ef>AND</span> u.status <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;ACTIVE&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>AND</span> m.sentiment_score <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>8</span>
</span></span></code></pre></div><p><strong>Mã C# minh họa:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PostCommentService</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ... Initialize readonly fields ...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>async</span> Task&lt;IEnumerable&lt;Comment&gt;&gt; GetPostCommentsAsync(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>string</span> postId,
</span></span><span style=display:flex><span>        DateTime startDate,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> minSentimentScore)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Step 1: Query DynamoDB for comments</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> comments = <span style=color:#66d9ef>await</span> _dynamoDbContext.QueryAsync&lt;Comment&gt;(postId,
</span></span><span style=display:flex><span>            QueryOperator.GreaterThanOrEqual,
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>new</span> [] { startDate.ToString(<span style=color:#e6db74>&#34;yyyy-MM-dd&#34;</span>) }).GetRemainingAsync();
</span></span><span style=display:flex><span>          
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Step 2: Get user details and filter by active status</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> userIds = comments.Select(c =&gt; c.UserId).Distinct();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> userDetails = <span style=color:#66d9ef>await</span> _userService.GetUserDetailsAsync(userIds);
</span></span><span style=display:flex><span>        comments = comments.Where(c =&gt; userDetails[c.UserId].Status == <span style=color:#e6db74>&#34;ACTIVE&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Step 3: Apply sentiment score filter from analytics</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> commentIds = comments.Select(c =&gt; c.CommentId);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> sentimentScores = <span style=color:#66d9ef>await</span> _analyticsDb.GetSentimentScoresAsync(commentIds);
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> comments.Where(c =&gt; sentimentScores[c.CommentId] &gt; minSentimentScore);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=khi-phân-tích-các-truy-vấn-hiện-có-hãy-xác-định-các-kịch-bản-yêu-cầu-lọc-phía-client-và-đánh-giá-tác-động-hiệu-năng-của-chúng>Khi phân tích các truy vấn hiện có, hãy xác định các kịch bản yêu cầu lọc phía client và đánh giá tác động hiệu năng của chúng.</h2><h2 id=xử-lý-phân-trang-handling-pagination>Xử lý phân trang (Handling pagination)</h2><p>Đánh giá chiến lược phân trang hiện tại của ứng dụng và điều chỉnh cho phù hợp với khả năng của DynamoDB. Trong khi các ứng dụng cơ sở dữ liệu quan hệ thường hiển thị tổng số trang cho người dùng, DynamoDB được tối ưu cho phân trang theo khóa và tiến tới trước (forward-only), sử dụng <code>LastEvaluatedKey</code>.</p><ul><li>Vì việc triển khai các tính năng như tổng số bản ghi cần duyệt toàn bộ bảng (full table scans), hãy cân nhắc các giải pháp thay thế như điều hướng theo con trỏ (cursor-based) hoặc các mẫu “load more".</li><li>Đối với các ứng dụng cần ngữ cảnh kích thước tập kết quả, hãy cân nhắc triển khai các bộ đếm (counters) thay vì tính tổng thời gian thực.</li></ul><p>Khi thiết kế phân trang trong lớp truy cập dữ liệu cho DynamoDB, hiểu hành vi phân trang cốt lõi của nó. DynamoDB có thể không trả tất cả các item khớp trong một cuộc gọi API do hai ràng buộc chính: tham số &ldquo;Limit&rdquo; và kích thước đọc tối đa 1 MB.</p><ul><li><strong>Phân tích tác động của lọc:</strong> Đánh giá các bộ lọc truy vấn và tính phân phối (cardinality) của dữ liệu.</li><li><strong>Tối ưu hóa tham số Limit:</strong> Hướng tới giá trị limit phù hợp gần với kích thước trang mong muốn trong khi tính đến tác động của bộ lọc.</li><li><strong>Giám sát hiệu năng:</strong> Theo dõi số cuộc gọi API trên mỗi yêu cầu trang và thời gian phản hồi trung bình.</li></ul><hr><h2 id=xử-lý-các-trường-hợp-biên-handling-edge-cases>Xử lý các trường hợp biên (Handling edge cases)</h2><p>Khi di chuyển lớp truy cập dữ liệu sang DynamoDB, hãy xác định và giải quyết các trường hợp biên liên quan tới các thao tác dữ liệu ở quy mô lớn:</p><ul><li><strong>Các thao tác khối lượng lớn có thể dự đoán được:</strong> Xem xét kịch bản một người dùng có hàng triệu người theo dõi đăng nội dung. Các mẫu thiết kế như write sharding hoặc batch processing có thể giúp quản lý những kịch bản này.</li><li><strong>Các sự kiện tăng đột biến không mong đợi:</strong> Ví dụ, khi một bài đăng bất ngờ nhận được lượng tương tác lớn. Những kịch bản này đòi hỏi các chiến lược như scaling động, caching và mô hình bất đồng bộ.</li></ul><hr><h2 id=xử-lý-các-phép-tổng-hợp-và-dữ-liệu-phi-chuẩn-hóa-handling-aggregations-and-de-normalized-data>Xử lý các phép tổng hợp và dữ liệu phi chuẩn hóa (Handling aggregations and de-normalized data)</h2><h3 id=quản-lý-các-phép-tổng-hợp-managing-aggregations>Quản lý các phép tổng hợp (Managing aggregations)</h3><p>Các cơ sở dữ liệu thường dùng JOIN và GROUP BY cho các phép tổng hợp thời gian thực. Các mẫu truy cập của DynamoDB hỗ trợ các cách tiếp cận khác như duy trì các thực thể aggregation để lưu các giá trị được tiền tính toán.</p><h3 id=xử-lý-dữ-liệu-phi-chuẩn-hóa-handling-de-normalized-data>Xử lý dữ liệu phi chuẩn hóa (Handling de-normalized data)</h3><p>DynamoDB thường yêu cầu phi chuẩn hóa dữ liệu. Ví dụ, chúng tôi lưu trạng thái người dùng trực tiếp trên các thực thể bài đăng để cho phép lọc hiệu quả. Cách tiếp cận này đánh đổi tăng số thao tác ghi để cải thiện hiệu năng đọc.</p><h3 id=quản-lý-cập-nhật-managing-updates>Quản lý cập nhật (Managing updates)</h3><ul><li><strong>Cập nhật đồng bộ (Synchronous updates):</strong> Cho các tính năng quan trọng cần tính nhất quán ngay lập tức (ví dụ: dùng giao dịch).</li><li><strong>Cập nhật bất đồng bộ (Asynchronous updates):</strong> Sử dụng Amazon DynamoDB Streams và AWS Lambda cho các cập nhật không cần tính nhất quán ngay lập tức.</li></ul><h3 id=xử-lý-phân-tích-analytical-processing>Xử lý phân tích (Analytical processing)</h3><p>Đối với các truy vấn phân tích phức tạp, hãy cân nhắc các dịch vụ bổ trợ: Amazon Redshift, Zero-ETL integration, Amazon Athena, hoặc Amazon SageMaker Lakehouse.</p><hr><h2 id=kết-luận>Kết luận</h2><p>Trong bài viết này, chúng tôi đã khám phá các chiến lược để hiện đại hóa lớp truy cập dữ liệu của ứng dụng cho DynamoDB. Việc chuyển đổi từ các mẫu dựa trên SQL sang cách tiếp cận điều khiển bằng API của DynamoDB đem lại cơ hội tối ưu hóa cách ứng dụng tương tác với dữ liệu của nó. Sự hợp tác chặt chẽ giữa các nhóm cơ sở dữ liệu và ứng dụng giúp tạo ra các giải pháp cân bằng giữa hiệu năng, tối ưu chi phí và khả năng mở rộng.</p><h3 id=về-các-tác-giả>Về các tác giả</h3><ul><li><strong>Ramana Kiran Mannava:</strong> Chuyên gia Tư vấn Cấp cao tại AWS Professional Services, chuyên sâu về .NET và AWS.</li><li><strong>Akber Rizwan Shaik:</strong> Chuyên gia Tư vấn Cấp cao tại AWS Professional Services.</li><li><strong>Mahesh Kumar Vemula:</strong> Chuyên gia Tư vấn Cấp cao tại AWS Professional Services, đam mê Serverless.</li></ul><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../3-blogstranslated/ title="Translated Blogs"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../3-blogstranslated/3.2-blog2/ title="Blog 2" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../js/clipboard.min.js?1765365955></script><script src=../../js/perfect-scrollbar.min.js?1765365955></script><script src=../../js/perfect-scrollbar.jquery.min.js?1765365955></script><script src=../../js/jquery.sticky.js?1765365955></script><script src=../../js/featherlight.min.js?1765365955></script><script src=../../js/highlight.pack.js?1765365955></script><script>hljs.initHighlightingOnLoad()</script><script src=../../js/modernizr.custom-3.6.0.js?1765365955></script><script src=../../js/learn.js?1765365955></script><script src=../../js/hugo-learn.js?1765365955></script><link href=../../mermaid/mermaid.css?1765365955 rel=stylesheet><script src=../../mermaid/mermaid.js?1765365955></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>